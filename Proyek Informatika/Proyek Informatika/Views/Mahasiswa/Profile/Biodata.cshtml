@{
    ViewBag.Title = "Biodata";
}
<script type="text/javascript">
    $(document).ready(function () {
        $.post("Profile/GetBiodata", "", function (data) {
            $("#editInLine1a").html(data.nama);
            $("#viewInLine1a").val(data.nama);
            $("#editInLine2a").html(data.email);
            $("#viewInLine2a").val(data.email);
            $("#editInLine3a").html(data.nomor_telepon);
            $("#viewInLine3a").val(data.nomor_telepon);
            $("#npm").html(data.NPM);
        });
        $.post("Profile/GetFoto", "", function (data) {
            $("#foto").attr("src", data);
        });
        $.post("Profile/GetData", "", function (data) {
            $("#foto2").attr("src", data.foto);
            $("#nik").html(data.NIK);
            $("#nama").html(data.nama);
            $("#email").html(data.email);
            $("#matkul").html("Skripsi "+data.jenis);
            $("#topik").html(data.judul);
        });
    });

    function editInLine(id) {
        document.getElementById("editInLine" + id + "a").style.display = "none";
        document.getElementById("editInLine" + id + "b").style.display = "none";
        document.getElementById("viewInLine" + id + "a").style.display = "inline";
        document.getElementById("viewInLine" + id + "b").style.display = "inline";
    }
    function viewInLine(id) {
        document.getElementById("editInLine" + id + "a").style.display = "inline";
        document.getElementById("editInLine" + id + "b").style.display = "inline";
        document.getElementById("viewInLine" + id + "a").style.display = "none";
        document.getElementById("viewInLine" + id + "b").style.display = "none";

        $.post("Profile/GetBiodata", "", function (data) {
            $("#editInLine1a").html(data.nama);
            $("#viewInLine1a").val(data.nama);
            $("#editInLine2a").html(data.email);
            $("#viewInLine2a").val(data.email);
            $("#editInLine3a").html(data.nomor_telepon);
            $("#viewInLine3a").val(data.nomor_telepon);
            $("#npm").html(data.NPM);
        });
    }

    $("#save-nama").click(function () {
        var values = { nama: $("#viewInLine1a").val() }
        $.post("Profile/SaveNama", values, function (data) {
            alert(data);
        });
        $('#content').load('Profile/Biodata');
    })
    $("#save-email").click(function () {
        var values = { email: $("#viewInLine2a").val() }
        $.post("Profile/SaveEmail", values, function (data) {
            alert(data);
        });
        $('#content').load('Profile/Biodata');
    })
    $("#save-telepon").click(function () {
        var values = { nomor_telepon: $("#viewInLine3a").val() }
        $.post("Profile/SaveTelepon", values, function (data) {
            alert(data);
        });
        $('#content').load('Profile/Biodata');
    })
    function onComplete(e) {
        $('#content').load('Profile/Biodata');
    }
    $("#remove-foto").click(function () {
        $.post("Profile/RemoveFoto", "", function (data) {
        });
        $('#content').load('Profile/Biodata');
    })
</script>
<div class="layer">
    <h1>
        Biodata</h1>
    <table class="profile">
        <tr>
            <td rowspan="4" style="width: 130px">
                <img id="foto" src="../../../Content/images/user.png" class="avatar">
            </td>
            <!--------------------NPM-------------------->
            <td style="height: 30px;">
                NPM
            </td>
            <td>
                :
            </td>
            <td>
                <span id="npm"></span>
            </td>
            <td style="width: 80px">
            </td>
        </tr>
        <tr>
            <!--------------------Nama-------------------->
            <td style="width: 85px; height: 30px;">
                Nama
            </td>
            <td style="width: 20px">
                :
            </td>
            <td style="width: 250px">
                <span id="editInLine1a"></span>
                <input type="text" style="width: 200px; display: none;" id="viewInLine1a" value="" />
            </td>
            <!--------------------Editor Nama-------------------->
            <td style="width: 100px;">
                <!--edit-->
                <a class="t-button t-button-icon t-grid-edit" onclick="editInLine(1)" id="editInLine1b">
                    <span class="t-icon t-edit"></span></a>
                <!--save-->
                <span id="viewInLine1b" style="display: none;"><a class="t-button t-button-icon t-grid-edit"
                    id="save-nama"><span class="t-icon t-update"></span></a>&nbsp <a class="t-button t-button-icon t-grid-edit"
                        onclick="viewInLine(1)"><span class="t-icon t-cancel"></span></a></span>
            </td>
        </tr>
        <tr>
            <!--------------------Email-------------------->
            <td style="height: 30px;">
                Email
            </td>
            <td>
                :
            </td>
            <td>
                <span id="editInLine2a"></span>
                <input type="text" style="width: 200px; display: none;" id="viewInLine2a" value="" />
            </td>
            <!--------------------Editor Email-------------------->
            <td>
                <!--edit-->
                <a class="t-button t-button-icon t-grid-edit" onclick="editInLine(2)" id="editInLine2b">
                    <span class="t-icon t-edit"></span></a>
                <!--save-->
                <span id="viewInLine2b" style="display: none;"><a class="t-button t-button-icon t-grid-edit"
                    id="save-email"><span class="t-icon t-update"></span></a>&nbsp <a class="t-button t-button-icon t-grid-edit"
                        onclick="viewInLine(2)"><span class="t-icon t-cancel"></span></a></span>
            </td>
        </tr>
        <tr>
            <!--------------------Telepon-------------------->
            <td style="height: 30px;">
                Telepon
            </td>
            <td>
                :
            </td>
            <td>
                <span id="editInLine3a"></span>
                <input type="text" style="width: 200px; display: none;" id="viewInLine3a" value="" />
            </td>
            <!--------------------Editor Telepon-------------------->
            <td>
                <!--edit-->
                <a class="t-button t-button-icon t-grid-edit" onclick="editInLine(3)" id="editInLine3b">
                    <span class="t-icon t-edit"></span></a>
                <!--save-->
                <span id="viewInLine3b" style="display: none;"><a class="t-button t-button-icon t-grid-edit"
                    id="save-telepon"><span class="t-icon t-update"></span></a>&nbsp <a class="t-button t-button-icon t-grid-edit"
                        onclick="viewInLine(3)"><span class="t-icon t-cancel"></span></a></span>
            </td>
        </tr>
        <tr>
            <td colspan="5">
                @(Html.Telerik().Upload()
    .Name("attachmentsFoto")
    .Multiple(false)
    .Async(async => async
    .Save("SaveFoto", "Profile")
    .Remove("RemoveFoto", "Profile")
    .AutoUpload(true))
    .ClientEvents(c => c
        .OnSuccess("onComplete")
    )

)
                <br />
                <button id="remove-foto" class="t-button t-state-default">
                    Reset Default</button>
            </td>
        </tr>
    </table>

    <fieldset>
        <legend>Data Dosen Pembimbing</legend>

        <table class="profile">
            <tr>
                <td rowspan="3" style="width: 130px">
                    <img id="foto2" src="../../../Content/images/user.png" class="avatar">
                </td>
                <!--------------------NPM-------------------->
                <td style="height: 30px;">
                    NIK
                </td>
                <td>
                    :
                </td>
                <td>
                    <span id="nik"></span>
                </td>
            </tr>
            <tr>
                <!--------------------Nama-------------------->
                <td style="width: 85px; height: 30px;">
                    Nama
                </td>
                <td style="width: 20px">
                    :
                </td>
                <td style="width: 250px">
                    <span id="nama"></span>
                </td>
            </tr>
            <tr>
                <!--------------------Email-------------------->
                <td style="height: 30px;">
                    Email
                </td>
                <td>
                    :
                </td>
                <td>
                    <span id="email"></span>
                </td>
            </tr>
        </table>
    </fieldset>

    <fieldset>
        <legend>Data Skripsi</legend>

        <table class="profile">
            <tr>
                <!--------------------Mata Kuliah-------------------->
                <td style="width: 85px; height: 30px;">
                    Mata Kuliah
                </td>
                <td style="width: 20px">
                    :
                </td>
                <td>
                    <span id="matkul"></span>
                </td>
            </tr>
            <tr>
                <!--------------------Topik-------------------->
                <td style="height: 30px;">
                    Topik
                </td>
                <td>
                    :
                </td>
                <td>
                    <span id="topik"></span>
                </td>
            </tr>

        </table>
    </fieldset>
</div>
